<%#
  Page header component
  Usage: render "shared/page_header",
           title: "My Page",
           subtitle: "Page description",
           action_text: "New Item",
           action_url: new_item_path
  Options:
    - title: Main heading (required)
    - subtitle: Subtitle text (optional)
    - breadcrumb: Breadcrumb text (optional)
    - action_text: Primary action button text (optional)
    - action_url: Primary action button URL (optional)
    - variant: "default" or "gradient" (default: "default")
    - extra_classes: Additional CSS classes (optional)
%>

<%
  locals = defined?(local_assigns) ? local_assigns : {}
  variant = locals[:variant].presence || "default"
  extra_classes = locals[:extra_classes]

  default_wrapper = "mb-6 flex flex-wrap items-center justify-between gap-4"
  gradient_wrapper = "mb-8 rounded-2xl border-4 border-black bg-black p-8 text-white shadow-2xl"
  wrapper_classes = variant == "gradient" ? gradient_wrapper : default_wrapper
  header_classes = [wrapper_classes, extra_classes].compact.join(" ")
%>

<% if variant == "gradient" %>
  <header class="<%= header_classes %>">
    <% if defined?(breadcrumb) && breadcrumb.present? %>
      <p class="text-sm uppercase tracking-[0.4em] font-['Montserrat'] text-[#FFCC00]"><%= breadcrumb %></p>
    <% end %>
    <div class="mt-4 flex flex-wrap items-center justify-between gap-4">
      <div>
        <h1 class="text-3xl font-['Montserrat'] font-bold text-white"><%= title %></h1>
        <% if defined?(subtitle) && subtitle.present? %>
          <p class="mt-2 text-gray-300"><%= subtitle %></p>
        <% end %>
      </div>
      <% if defined?(action_text) && action_text.present? && defined?(action_url) && action_url.present? %>
        <%= link_to action_text, action_url, class: "inline-flex items-center rounded-full bg-[#FFCC00] px-5 py-3 text-sm font-['Montserrat'] font-semibold text-black shadow-lg shadow-black/20 transition hover:bg-[#FFD633] hover:scale-105" %>
      <% end %>
    </div>
  </header>
<% else %>
  <header class="<%= header_classes %>">
    <div>
      <% if defined?(breadcrumb) && breadcrumb.present? %>
        <p class="text-xs uppercase tracking-[0.3em] font-['Montserrat'] text-[#FFCC00]"><%= breadcrumb %></p>
      <% end %>
      <h1 class="text-3xl font-['Montserrat'] font-bold text-black"><%= title %></h1>
      <% if defined?(subtitle) && subtitle.present? %>
        <p class="mt-2 text-gray-600"><%= subtitle %></p>
      <% end %>
    </div>
    <% if defined?(action_text) && action_text.present? && defined?(action_url) && action_url.present? %>
      <%= link_to action_text, action_url, class: "inline-flex items-center gap-2 rounded-full bg-[#FFCC00] px-5 py-3 text-sm font-['Montserrat'] font-semibold text-black shadow-lg shadow-[#FFCC00]/20 transition-all duration-200 hover:bg-[#FFD633] hover:scale-105 active:scale-95" %>
    <% end %>
  </header>
<% end %>
