<%= form_with(model: participant, class: "space-y-6") do |form| %>
  <% if participant.errors.any? %>
    <div class="rounded-2xl border border-rose-200 bg-rose-50 p-4" role="alert">
      <div class="flex items-center gap-2 mb-2">
        <svg class="h-5 w-5 text-rose-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <use href="#heroicon-x" />
        </svg>
        <h3 class="text-sm font-semibold text-rose-900">
          <%= pluralize(participant.errors.count, "erro") %> impediu que este participante fosse salvo:
        </h3>
      </div>
      <ul class="ml-7 list-disc space-y-1 text-sm text-rose-700">
        <% participant.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="rounded-3xl border border-slate-100 bg-white p-6 shadow-xl">
    <div class="space-y-5">
      <%= render "shared/form_field",
          form: form,
          field: :name,
          label: "Nome do Participante",
          type: "text",
          required: true,
          autofocus: true,
          placeholder: "Digite o nome do participante",
          help_text: "Nome completo ou identificador do participante" %>

      <%= render "shared/form_field",
          form: form,
          field: :competition_id,
          label: "Competição",
          type: "select",
          required: true,
          options: Competition.all.map { |c| [c.title, c.id] },
          include_blank: "Selecione uma competição",
          help_text: "Escolha a competição à qual este participante pertence" %>

      <%= render "shared/form_field",
          form: form,
          field: :user_id,
          label: "Jurado Responsável (opcional)",
          type: "select",
          options: User.all.map { |u| ["#{u.name} (#{u.email})", u.id] },
          include_blank: "Nenhum jurado vinculado",
          help_text: "Opcionalmente, vincule um jurado específico a este participante" %>
    </div>

    <div class="mt-6 flex flex-wrap gap-3 pt-6 border-t border-slate-200">
      <%= form.submit (participant.new_record? ? "Criar Participante" : "Atualizar Participante"), class: "inline-flex items-center gap-2 rounded-full bg-indigo-600 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow-lg shadow-indigo-500/30 transition-all duration-200 hover:bg-indigo-500 hover:shadow-xl active:scale-95" %>

      <%= link_to "Cancelar", (participant.new_record? ? participants_path : participant_path(participant)), class: "inline-flex items-center gap-2 rounded-full border border-slate-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-slate-700 transition-all duration-200 hover:bg-slate-50 hover:border-slate-400 active:scale-95" %>
    </div>
  </div>
<% end %>
